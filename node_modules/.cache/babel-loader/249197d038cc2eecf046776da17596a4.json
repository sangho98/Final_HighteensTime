{"ast":null,"code":"import _objectSpread from\"/Users/wk30815/Documents/Code/React/instagram/Final_HighteensTime/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/wk30815/Documents/Code/React/instagram/Final_HighteensTime/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/wk30815/Documents/Code/React/instagram/Final_HighteensTime/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useEffect,useRef}from\"react\";import styled from\"styled-components\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faCommentDots,faPowerOff,faUserFriends}from\"@fortawesome/free-solid-svg-icons\";import{Link}from\"react-router-dom\";import{useState}from\"react\";import Navbar from\"react-bootstrap/Navbar\";import Nav from\"react-bootstrap/Nav\";import Form from\"react-bootstrap/Form\";import FormControl from\"react-bootstrap/FormControl\";import Button from\"react-bootstrap/Button\";import Modal from\"react-bootstrap/Modal\";import Table from\"react-bootstrap/Table\";import{GetMessage,SendMessage}from\"../utils/ApiConfig\";import{Col}from\"react-bootstrap\";import Logout from\"../screens/Logout\";import Alert from\"react-bootstrap/Alert\";import{Overlay,Tooltip,Toast}from\"react-bootstrap\";import{messageAlram,tokenData}from\"../Apollo\";import Friend from\"./Friend\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Headalign=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 60px;\\n\"])));var ListMessage=function ListMessage(props){var message=props.message,pageNum=props.pageNum,pageNumEnd=props.pageNumEnd,setTypeModal=props.setTypeModal,setMessageId=props.setMessageId;return/*#__PURE__*/_jsxs(Table,{bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{textAlign:\"center\"},children:\"\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"93%\",textAlign:\"center\"},children:\"\\uC81C\\uBAA9\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:message.slice(pageNum,pageNumEnd).map(function(m){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\"},children:m.id}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\"},onClick:function onClick(){setTypeModal(\"2\");setMessageId(m.id);},children:m.title})]},m.id);})})]});};var MessageDetail=function MessageDetail(props){var message=props.message,setTypeModal=props.setTypeModal,messageId=props.messageId;return/*#__PURE__*/_jsxs(Table,{bordered:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:message.map(function(m){if(m.id===messageId){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{width:\"10%\",textAlign:\"center\"},children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"td\",{style:{width:\"90%\",textAlign:\"center\"},children:m.title})]});}})}),/*#__PURE__*/_jsx(\"tbody\",{children:message.map(function(m){if(m.id===messageId){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{textAlign:\"center\"},children:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"td\",{style:{textAlign:\"center\"},children:m.content})]},m.id);}})})]});};var Test=function Test(props){var data=props.data,message=props.message,setCount=props.setCount,setModalShow=props.setModalShow,typeModal=props.typeModal,setTypeModal=props.setTypeModal,pageNum=props.pageNum,pageNumEnd=props.pageNumEnd,setMessageId=props.setMessageId,messageId=props.messageId;if(typeModal===\"1\"){return/*#__PURE__*/_jsx(ListMessage,{message:message,pageNum:pageNum,pageNumEnd:pageNumEnd,setTypeModal:setTypeModal,setMessageId:setMessageId});}else if(typeModal===\"2\"){return/*#__PURE__*/_jsx(MessageDetail,{message:message,messageId:messageId});}};var MessageShow=function MessageShow(props){var data=props.data,message=props.message,setCount=props.setCount,setModalShow=props.setModalShow,typeModal=props.typeModal,setTypeModal=props.setTypeModal,prop=props.prop;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),pageNum=_useState2[0],setPageNum=_useState2[1];var _useState3=useState(5),_useState4=_slicedToArray(_useState3,2),pageNumEnd=_useState4[0],setPageNumEnd=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),messageId=_useState8[0],setMessageId=_useState8[1];var target=useRef(null);return/*#__PURE__*/_jsxs(Modal,_objectSpread(_objectSpread({},props),{},{size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:typeModal===\"1\"||typeModal===\"2\"?/*#__PURE__*/_jsx(Modal.Title,{id:\"contained-modal-title-vcenter\",children:\"\\uCABD\\uC9C0\\uD568\"}):/*#__PURE__*/_jsx(Modal.Title,{id:\"contained-modal-title-vcenter\",children:\"\\uCE5C\\uAD6C \\uBAA9\\uB85D\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:typeModal===\"1\"||typeModal===\"2\"?/*#__PURE__*/_jsx(Test,{message:message,pageNum:pageNum,pageNumEnd:pageNumEnd,setTypeModal:setTypeModal,setMessageId:setMessageId,messageId:messageId,typeModal:typeModal,data:data}):/*#__PURE__*/_jsx(Friend,{prop:prop})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[typeModal===\"1\"?/*#__PURE__*/_jsx(Button,{onClick:function onClick(){if(pageNum<=0){setShow(!show);}else{setShow(false);setPageNum(pageNum-5);setPageNumEnd(pageNumEnd-5);}},children:\"Prev\"}):null,typeModal===\"1\"?/*#__PURE__*/_jsx(Button,{onClick:function onClick(){setPageNum(pageNum+5);setPageNumEnd(pageNumEnd+5);setShow(!show);},children:\"Next\"}):null,/*#__PURE__*/_jsx(Button,{onClick:function onClick(){setModalShow(false);setCount(false);},children:\"Close\"})]})]}));};function Header(props){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),modalShow=_React$useState2[0],setModalShow=_React$useState2[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),count=_useState12[0],setCount=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),show=_useState14[0],setShow=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),typeModal=_useState16[0],setTypeModal=_useState16[1];var target=useRef(null);var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),successLogin=_useState18[0],setSuccessLogin=_useState18[1];var data=tokenData();if(modalShow&&!count){GetMessage({data:data,setMessage:setMessage});if(message){setCount(true);}}if(props.history.location.pathname===\"/login\"||props.history.location.pathname===\"/register\"){return null;}else{return/*#__PURE__*/_jsxs(Headalign,{children:[/*#__PURE__*/_jsx(\"clientSet\",{}),modalShow&&message?/*#__PURE__*/_jsx(MessageShow,{show:modalShow,onHide:function onHide(){return setModalShow(false);},data:data,message:message,typeModal:typeModal,setCount:setCount,setModalShow:setModalShow,setTypeModal:setTypeModal,prop:props}):null,/*#__PURE__*/_jsxs(Navbar,{bg:\"secondary\",variant:\"dark\",style:{height:\"60px\"},children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(Navbar.Brand,{children:\"HighSchool Time\"})}),/*#__PURE__*/_jsx(Nav,{className:\"mr-auto\"}),/*#__PURE__*/_jsxs(Nav,{children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faUserFriends,style:{paddingRight:\"13px\"},color:\"white\",size:\"2x\",onClick:function onClick(){setTypeModal(\"3\");setModalShow(true);}}),/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCommentDots,style:{paddingRight:\"13px\"},color:\"white\",size:\"2x\",onClick:function onClick(){setTypeModal(\"1\");setModalShow(true);}}),/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPowerOff,style:{paddingRight:\"13px\"},color:\"white\",size:\"2x\",onClick:function onClick(){localStorage.removeItem(\"TOKEN\");}})}),/*#__PURE__*/_jsxs(Form,{inline:true,children:[/*#__PURE__*/_jsx(FormControl,{type:\"text\",placeholder:\"Search\",className:\"mr-sm-2\"}),/*#__PURE__*/_jsx(Button,{variant:\"outline-light\",children:\"\\uAC80\\uC0C9\"})]})]})]})]});}}export default Header;","map":{"version":3,"sources":["/Users/wk30815/Documents/Code/React/instagram/Final_HighteensTime/src/component/Header.js"],"names":["React","useEffect","useRef","styled","FontAwesomeIcon","faCommentDots","faPowerOff","faUserFriends","Link","useState","Navbar","Nav","Form","FormControl","Button","Modal","Table","GetMessage","SendMessage","Col","Logout","Alert","Overlay","Tooltip","Toast","messageAlram","tokenData","Friend","Headalign","div","ListMessage","props","message","pageNum","pageNumEnd","setTypeModal","setMessageId","textAlign","width","slice","map","m","id","title","MessageDetail","messageId","content","Test","data","setCount","setModalShow","typeModal","MessageShow","prop","setPageNum","setPageNumEnd","show","setShow","target","Header","modalShow","setMessage","count","successLogin","setSuccessLogin","history","location","pathname","height","paddingRight","localStorage","removeItem"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport {\n  faCommentDots,\n  faPowerOff,\n  faUserFriends,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { Link } from \"react-router-dom\";\nimport { useState } from \"react\";\nimport Navbar from \"react-bootstrap/Navbar\";\nimport Nav from \"react-bootstrap/Nav\";\nimport Form from \"react-bootstrap/Form\";\nimport FormControl from \"react-bootstrap/FormControl\";\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Table from \"react-bootstrap/Table\";\nimport { GetMessage, SendMessage } from \"../utils/ApiConfig\";\nimport { Col } from \"react-bootstrap\";\nimport Logout from \"../screens/Logout\";\nimport Alert from \"react-bootstrap/Alert\";\nimport { Overlay, Tooltip, Toast } from \"react-bootstrap\";\nimport { messageAlram, tokenData } from \"../Apollo\";\nimport Friend from \"./Friend\";\n\nconst Headalign = styled.div`\n  width: 100%;\n  height: 60px;\n`;\n\nconst ListMessage = (props) => {\n  const { message, pageNum, pageNumEnd, setTypeModal, setMessageId } = props;\n\n  return (\n    <Table bordered hover>\n      <thead>\n        <tr>\n          <th style={{ textAlign: \"center\" }}>번호</th>\n          <th style={{ width: \"93%\", textAlign: \"center\" }}>제목</th>\n        </tr>\n      </thead>\n      <tbody>\n        {message.slice(pageNum, pageNumEnd).map((m) => {\n          return (\n            <tr key={m.id}>\n              <td style={{ textAlign: \"center\" }}>{m.id}</td>\n\n              <td\n                style={{ textAlign: \"center\" }}\n                onClick={() => {\n                  setTypeModal(\"2\");\n                  setMessageId(m.id);\n                }}\n              >\n                {m.title}\n              </td>\n            </tr>\n          );\n        })}\n      </tbody>\n    </Table>\n  );\n};\n\nconst MessageDetail = (props) => {\n  const { message, setTypeModal, messageId } = props;\n  return (\n    <Table bordered hover>\n      <thead>\n        {message.map((m) => {\n          if (m.id === messageId) {\n            return (\n              <tr>\n                <th style={{ width: \"10%\", textAlign: \"center\" }}>제목</th>\n                <td style={{ width: \"90%\", textAlign: \"center\" }}>{m.title}</td>\n              </tr>\n            );\n          }\n        })}\n      </thead>\n      <tbody>\n        {message.map((m) => {\n          if (m.id === messageId) {\n            return (\n              <tr key={m.id}>\n                <th style={{ textAlign: \"center\" }}>내용</th>\n\n                <td style={{ textAlign: \"center\" }}>{m.content}</td>\n              </tr>\n            );\n          }\n        })}\n      </tbody>\n    </Table>\n  );\n};\n\nconst Test = (props) => {\n  const {\n    data,\n    message,\n    setCount,\n    setModalShow,\n    typeModal,\n    setTypeModal,\n    pageNum,\n    pageNumEnd,\n    setMessageId,\n    messageId,\n  } = props;\n\n  if (typeModal === \"1\") {\n    return (\n      <ListMessage\n        message={message}\n        pageNum={pageNum}\n        pageNumEnd={pageNumEnd}\n        setTypeModal={setTypeModal}\n        setMessageId={setMessageId}\n      />\n    );\n  } else if (typeModal === \"2\") {\n    return <MessageDetail message={message} messageId={messageId} />;\n  }\n};\n\nconst MessageShow = (props) => {\n  const {\n    data,\n    message,\n    setCount,\n    setModalShow,\n    typeModal,\n    setTypeModal,\n    prop,\n  } = props;\n  const [pageNum, setPageNum] = useState(0);\n  const [pageNumEnd, setPageNumEnd] = useState(5);\n  const [show, setShow] = useState(true);\n  const [messageId, setMessageId] = useState(null);\n  const target = useRef(null);\n\n  return (\n    <Modal\n      {...props}\n      size=\"lg\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n    >\n      <Modal.Header closeButton>\n        {typeModal === \"1\" || typeModal === \"2\" ? (\n          <Modal.Title id=\"contained-modal-title-vcenter\">쪽지함</Modal.Title>\n        ) : (\n          <Modal.Title id=\"contained-modal-title-vcenter\">\n            친구 목록\n          </Modal.Title>\n        )}\n      </Modal.Header>\n      <Modal.Body>\n        {typeModal === \"1\" || typeModal === \"2\" ? (\n          <Test\n            message={message}\n            pageNum={pageNum}\n            pageNumEnd={pageNumEnd}\n            setTypeModal={setTypeModal}\n            setMessageId={setMessageId}\n            messageId={messageId}\n            typeModal={typeModal}\n            data={data}\n          />\n        ) : (\n          <Friend prop={prop} />\n        )}\n      </Modal.Body>\n      <Modal.Footer>\n        {typeModal === \"1\" ? (\n          <Button\n            onClick={() => {\n              if (pageNum <= 0) {\n                setShow(!show);\n              } else {\n                setShow(false);\n                setPageNum(pageNum - 5);\n                setPageNumEnd(pageNumEnd - 5);\n              }\n            }}\n          >\n            Prev\n          </Button>\n        ) : null}\n        {typeModal === \"1\" ? (\n          <Button\n            onClick={() => {\n              setPageNum(pageNum + 5);\n              setPageNumEnd(pageNumEnd + 5);\n              setShow(!show);\n            }}\n          >\n            Next\n          </Button>\n        ) : null}\n\n        <Button\n          onClick={() => {\n            setModalShow(false);\n            setCount(false);\n          }}\n        >\n          Close\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n};\n\nfunction Header(props) {\n  const [modalShow, setModalShow] = React.useState(false);\n  const [message, setMessage] = useState(null);\n  const [count, setCount] = useState(false);\n  const [show, setShow] = useState(false);\n  const [typeModal, setTypeModal] = useState(true);\n  const target = useRef(null);\n  const [successLogin, setSuccessLogin] = useState(false);\n\n  const data = tokenData();\n\n  if (modalShow && !count) {\n    GetMessage({ data: data, setMessage: setMessage });\n    if (message) {\n      setCount(true);\n    }\n  }\n\n  if (\n    props.history.location.pathname === \"/login\" ||\n    props.history.location.pathname === \"/register\"\n  ) {\n    return null;\n  } else {\n    return (\n      <Headalign>\n        <clientSet></clientSet>\n        {modalShow && message ? (\n          <MessageShow\n            show={modalShow}\n            onHide={() => setModalShow(false)}\n            data={data}\n            message={message}\n            typeModal={typeModal}\n            setCount={setCount}\n            setModalShow={setModalShow}\n            setTypeModal={setTypeModal}\n            prop={props}\n          ></MessageShow>\n        ) : null}\n\n        <Navbar bg=\"secondary\" variant=\"dark\" style={{ height: \"60px\" }}>\n          <Link to=\"/\">\n            <Navbar.Brand>HighSchool Time</Navbar.Brand>\n          </Link>\n          <Nav className=\"mr-auto\"></Nav>\n\n          <Nav>\n            <FontAwesomeIcon\n              icon={faUserFriends}\n              style={{ paddingRight: \"13px\" }}\n              color=\"white\"\n              size=\"2x\"\n              onClick={() => {\n                setTypeModal(\"3\");\n                setModalShow(true);\n              }}\n            ></FontAwesomeIcon>\n\n            <FontAwesomeIcon\n              icon={faCommentDots}\n              style={{ paddingRight: \"13px\" }}\n              color=\"white\"\n              size=\"2x\"\n              onClick={() => {\n                setTypeModal(\"1\");\n                setModalShow(true);\n              }}\n            ></FontAwesomeIcon>\n\n            <Link to=\"/login\">\n              <FontAwesomeIcon\n                icon={faPowerOff}\n                style={{ paddingRight: \"13px\" }}\n                color=\"white\"\n                size=\"2x\"\n                onClick={() => {\n                  localStorage.removeItem(\"TOKEN\");\n                }}\n              ></FontAwesomeIcon>\n            </Link>\n\n            <Form inline>\n              <FormControl\n                type=\"text\"\n                placeholder=\"Search\"\n                className=\"mr-sm-2\"\n              />\n              <Button variant=\"outline-light\">검색</Button>\n            </Form>\n          </Nav>\n        </Navbar>\n      </Headalign>\n    );\n  }\n}\n\nexport default Header;\n"]},"metadata":{},"sourceType":"module"}