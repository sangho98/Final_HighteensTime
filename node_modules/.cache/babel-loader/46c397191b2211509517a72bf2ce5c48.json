{"ast":null,"code":"import _objectSpread from\"/Users/wk30815/Documents/Code/React/instagram/Final_HighteensTime/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/wk30815/Documents/Code/React/instagram/Final_HighteensTime/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/wk30815/Documents/Code/React/instagram/Final_HighteensTime/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/wk30815/Documents/Code/React/instagram/Final_HighteensTime/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useRef}from\"react\";import{Container,Row,Col,Form,Button,Overlay,Tooltip,OverlayTrigger}from\"react-bootstrap\";import{tokenData}from\"../Apollo\";import{GetUserInfo,PutUserInfo}from\"../utils/ApiConfig\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserInfo(props){var data=props.data;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),newNickname=_useState4[0],setNewNickname=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),newPassword=_useState6[0],setNewPassword=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),prevPassword=_useState8[0],setPrevPassword=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),correctPassword=_useState10[0],setCorrectPassword=_useState10[1];var target=useRef(null);useEffect(function(){GetUserInfo({data:tokenData(),setUserData:setUserData});},[]);var onChangePrevPassword=function onChangePrevPassword(e){setPrevPassword(e.target.value);};var onChangeNewPassword=function onChangeNewPassword(e){setNewPassword(e.target.value);};var onChangeNewNickname=function onChangeNewNickname(e){setNewNickname(e.target.value);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return PutUserInfo({nickname:newNickname,password:newPassword});case 3:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{fluid:true,children:[/*#__PURE__*/_jsx(Row,{style:{marginTop:\"2rem\"},children:/*#__PURE__*/_jsx(Col,{md:{offset:2,span:8},style:{borderBottom:\"1px solid gray\"},children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\uB9C8\\uC774 \\uD398\\uC774\\uC9C0\"})})}),/*#__PURE__*/_jsx(Row,{style:{marginTop:\"2rem\"},children:/*#__PURE__*/_jsx(Col,{md:{offset:2,span:8},children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Row,{children:[/*#__PURE__*/_jsxs(Form.Group,{as:Col,controlId:\"formPlaintextEmail\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{plaintext:true,readOnly:true,defaultValue:userData&&userData.email})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Col,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\uC774\\uB984\"}),/*#__PURE__*/_jsx(Form.Control,{plaintext:true,readOnly:true,defaultValue:userData&&userData.username})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Col,children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\uB2C9\\uB124\\uC784\"}),/*#__PURE__*/_jsx(Form.Control,{placeholder:\"\\uD604\\uC7AC \\uB2C9\\uB124\\uC784 : \".concat(userData&&userData.nickname),onChange:onChangeNewNickname})]})]}),/*#__PURE__*/_jsxs(Form.Row,{children:[/*#__PURE__*/_jsxs(Form.Group,{as:Col,controlId:\"formGridPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\uD604\\uC7AC \\uBE44\\uBC00\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"\\uD604\\uC7AC \\uBE44\\uBC00\\uBC88\\uD638\",onChange:onChangePrevPassword,ref:target})]}),/*#__PURE__*/_jsx(Overlay,{target:target.current,show:correctPassword,placement:\"top\",children:function children(props){return/*#__PURE__*/_jsx(Tooltip,_objectSpread(_objectSpread({id:\"overlay-example\"},props),{},{children:\"\\uC774\\uC804 \\uBE44\\uBC00\\uBC88\\uD638\\uC640 \\uC77C\\uCE58\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\"}));}}),/*#__PURE__*/_jsx(Overlay,{target:target.current,show:!correctPassword,placement:\"top\",children:function children(props){return/*#__PURE__*/_jsx(Tooltip,_objectSpread(_objectSpread({id:\"overlay-example\"},props),{},{children:\"\\uC774\\uC804 \\uBE44\\uBC00\\uBC88\\uD638\\uC640 \\uC77C\\uCE58\\uD569\\uB2C8\\uB2E4!\"}));}}),/*#__PURE__*/_jsxs(Form.Group,{as:Col,controlId:\"formGridPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\uBCC0\\uACBD \\uBE44\\uBC00\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"\\uBCC0\\uACBD\\uD560 \\uBE44\\uBC00\\uBC88\\uD638\",onChange:onChangeNewPassword})]})]}),/*#__PURE__*/_jsx(Form.Row,{children:/*#__PURE__*/_jsxs(Form.Group,{as:Col,children:[/*#__PURE__*/_jsx(Form.Label,{className:\"my-1 mr-2\",htmlFor:\"inlineFormCustomSelectPref\",children:\"\\uC9C0\\uC5ED\"}),/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",className:\"my-1 mr-sm-2\",id:\"inlineFormCustomSelectPref\",custom:true,children:[/*#__PURE__*/_jsxs(\"option\",{value:\"0\",children:[\"\\uD604\\uC7AC \\uC9C0\\uC5ED : \",userData&&userData.region]}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"\\uC11C\\uC6B8\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"\\uC778\\uCC9C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"\\uC775\\uC0B0\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"\\uC815\\uC74D\"})]})]})}),/*#__PURE__*/_jsx(Form.Row,{as:Col,children:!correctPassword&&newNickname!==null?/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",onClick:function onClick(e){handleSubmit(e);window.location.href=\"/\";},children:\"Submit\"}):/*#__PURE__*/_jsx(Button,{disabled:\"true\",variant:\"primary\",type:\"submit\",onClick:function onClick(){handleSubmit();},children:\"Submit\"})})]})})})]});}export default UserInfo;","map":{"version":3,"sources":["/Users/wk30815/Documents/Code/React/instagram/Final_HighteensTime/src/screens/UserInfo.js"],"names":["React","useEffect","useState","useRef","Container","Row","Col","Form","Button","Overlay","Tooltip","OverlayTrigger","tokenData","GetUserInfo","PutUserInfo","UserInfo","props","data","userData","setUserData","newNickname","setNewNickname","newPassword","setNewPassword","prevPassword","setPrevPassword","correctPassword","setCorrectPassword","target","onChangePrevPassword","e","value","onChangeNewPassword","onChangeNewNickname","handleSubmit","preventDefault","nickname","password","marginTop","offset","span","borderBottom","email","username","current","region","window","location","href"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport {\n  Container,\n  Row,\n  Col,\n  Form,\n  Button,\n  Overlay,\n  Tooltip,\n  OverlayTrigger,\n} from \"react-bootstrap\";\nimport { tokenData } from \"../Apollo\";\nimport { GetUserInfo, PutUserInfo } from \"../utils/ApiConfig\";\n\nfunction UserInfo(props) {\n  const { data } = props;\n  const [userData, setUserData] = useState(null);\n  const [newNickname, setNewNickname] = useState(null);\n  const [newPassword, setNewPassword] = useState(null);\n  const [prevPassword, setPrevPassword] = useState(null);\n\n  const [correctPassword, setCorrectPassword] = useState(true);\n\n  const target = useRef(null);\n\n  useEffect(() => {\n    GetUserInfo({\n      data: tokenData(),\n      setUserData: setUserData,\n    });\n  }, []);\n  const onChangePrevPassword = (e) => {\n    setPrevPassword(e.target.value);\n  };\n  const onChangeNewPassword = (e) => {\n    setNewPassword(e.target.value);\n  };\n  const onChangeNewNickname = (e) => {\n    setNewNickname(e.target.value);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    await PutUserInfo({\n      nickname: newNickname,\n      password: newPassword,\n    });\n  };\n\n  return (\n    <Container fluid>\n      <Row style={{ marginTop: \"2rem\" }}>\n        <Col\n          md={{ offset: 2, span: 8 }}\n          style={{ borderBottom: \"1px solid gray\" }}\n        >\n          <h1>마이 페이지</h1>\n        </Col>\n      </Row>\n      <Row style={{ marginTop: \"2rem\" }}>\n        <Col md={{ offset: 2, span: 8 }}>\n          <Form>\n            <Form.Row>\n              <Form.Group as={Col} controlId=\"formPlaintextEmail\">\n                <Form.Label>Email</Form.Label>\n                <Form.Control\n                  plaintext\n                  readOnly\n                  defaultValue={userData && userData.email}\n                />\n              </Form.Group>\n              <Form.Group as={Col}>\n                <Form.Label>이름</Form.Label>\n                <Form.Control\n                  plaintext\n                  readOnly\n                  defaultValue={userData && userData.username}\n                />\n              </Form.Group>\n              <Form.Group as={Col}>\n                <Form.Label>닉네임</Form.Label>\n                <Form.Control\n                  placeholder={`현재 닉네임 : ${userData && userData.nickname}`}\n                  onChange={onChangeNewNickname}\n                />\n              </Form.Group>\n            </Form.Row>\n            <Form.Row>\n              <Form.Group as={Col} controlId=\"formGridPassword\">\n                <Form.Label>현재 비밀번호</Form.Label>\n                <Form.Control\n                  type=\"password\"\n                  placeholder=\"현재 비밀번호\"\n                  onChange={onChangePrevPassword}\n                  ref={target}\n                />\n              </Form.Group>\n              <Overlay\n                target={target.current}\n                show={correctPassword}\n                placement=\"top\"\n              >\n                {(props) => (\n                  <Tooltip id=\"overlay-example\" {...props}>\n                    이전 비밀번호와 일치하지 않습니다.\n                  </Tooltip>\n                )}\n              </Overlay>\n              <Overlay\n                target={target.current}\n                show={!correctPassword}\n                placement=\"top\"\n              >\n                {(props) => (\n                  <Tooltip id=\"overlay-example\" {...props}>\n                    이전 비밀번호와 일치합니다!\n                  </Tooltip>\n                )}\n              </Overlay>\n              <Form.Group as={Col} controlId=\"formGridPassword\">\n                <Form.Label>변경 비밀번호</Form.Label>\n                <Form.Control\n                  type=\"password\"\n                  placeholder=\"변경할 비밀번호\"\n                  onChange={onChangeNewPassword}\n                />\n              </Form.Group>\n            </Form.Row>\n\n            <Form.Row>\n              <Form.Group as={Col}>\n                <Form.Label\n                  className=\"my-1 mr-2\"\n                  htmlFor=\"inlineFormCustomSelectPref\"\n                >\n                  지역\n                </Form.Label>\n                <Form.Control\n                  as=\"select\"\n                  className=\"my-1 mr-sm-2\"\n                  id=\"inlineFormCustomSelectPref\"\n                  custom\n                >\n                  <option value=\"0\">\n                    현재 지역 : {userData && userData.region}\n                  </option>\n                  <option value=\"1\">서울</option>\n                  <option value=\"2\">인천</option>\n                  <option value=\"3\">익산</option>\n                  <option value=\"3\">정읍</option>\n                </Form.Control>\n              </Form.Group>\n            </Form.Row>\n            <Form.Row as={Col}>\n              {!correctPassword && newNickname !== null ? (\n                <Button\n                  variant=\"primary\"\n                  type=\"submit\"\n                  onClick={(e) => {\n                    handleSubmit(e);\n                    window.location.href = \"/\";\n                  }}\n                >\n                  Submit\n                </Button>\n              ) : (\n                <Button\n                  disabled=\"true\"\n                  variant=\"primary\"\n                  type=\"submit\"\n                  onClick={() => {\n                    handleSubmit();\n                  }}\n                >\n                  Submit\n                </Button>\n              )}\n            </Form.Row>\n          </Form>\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nexport default UserInfo;\n"]},"metadata":{},"sourceType":"module"}