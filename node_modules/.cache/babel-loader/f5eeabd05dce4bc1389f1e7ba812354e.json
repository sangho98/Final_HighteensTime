{"ast":null,"code":"import _slicedToArray from\"/Users/wk30815/Documents/Code/React/instagram/Final_HighteensTime/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/wk30815/Documents/Code/React/instagram/Final_HighteensTime/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect,useRef}from\"react\";import axios from\"axios\";import{SERVER_URL}from\"../utils/URL\";import{Button,Form,Row,Col,Container,Alert,Tooltip,OverlayTrigger,Popover,Overlay,Toast}from\"react-bootstrap\";import{Link}from\"react-router-dom\";import{messageAlram,tokenData}from\"../Apollo\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Test2=function Test2(props){return/*#__PURE__*/_jsxs(Toast,_objectSpread(_objectSpread({},props),{},{children:[/*#__PURE__*/_jsxs(Toast.Header,{children:[/*#__PURE__*/_jsx(\"img\",{src:\"holder.js/20x20?text=%20\",className:\"rounded mr-2\",alt:\"\"}),/*#__PURE__*/_jsx(\"strong\",{className:\"mr-auto\",children:\"Bootstrap\"}),/*#__PURE__*/_jsx(\"small\",{children:\"11 mins ago\"})]}),/*#__PURE__*/_jsx(Toast.Body,{children:\"Hello, world! This is a toast message.\"})]}));};function Login(props){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),email=_React$useState2[0],setEmail=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),password=_React$useState4[0],setPassword=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),click=_React$useState6[0],setClick=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),LoginError=_React$useState8[0],setLoginError=_React$useState8[1];var target=useRef(null);var onChangeEmail=function onChangeEmail(e){setEmail(e.target.value);};var onChangePassword=function onChangePassword(e){setPassword(e.target.value);};var onClickLogin=function onClickLogin(){var data={email:email,password:password};axios.post(SERVER_URL+\"/login\",data).then(function(res){localStorage.setItem(\"TOKEN\",\"Bearer \".concat(res.data));setLoginError(false);tokenData(localStorage.getItem(\"TOKEN\"));messageAlram(true);props.history.push(\"/\");}).catch(function(err){console.log(err);setLoginError(true);});};var handleKeyPress=function handleKeyPress(e){if(e.key===\"Enter\"){onClickLogin();}};return/*#__PURE__*/_jsxs(Container,{className:\"justify-content-center align-self-center\",style:{height:\"600px\"},children:[/*#__PURE__*/_jsx(Row,{className:\"justify-content-md-center \",style:{marginTop:\"10rem\"},children:/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"h1\",{style:{marginBottom:\"3rem\"},children:\"HighSchool Time\"})})}),/*#__PURE__*/_jsx(Row,{className:\"justify-content-md-center\",children:/*#__PURE__*/_jsx(Col,{md:5,children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(Form.Group,{controlId:\"formHorizontalEmail\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Email\",onChange:onChangeEmail,onKeyPress:handleKeyPress})})}),/*#__PURE__*/_jsx(Form.Group,{controlId:\"formHorizontalPassword\",children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",onChange:onChangePassword,onKeyPress:handleKeyPress})})}),/*#__PURE__*/_jsx(Form.Group,{children:/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(Button,{type:\"button\",style:{width:\"100%\"},onClick:function onClick(){onClickLogin();},ref:target,children:\"\\uB85C\\uADF8\\uC778\"}),/*#__PURE__*/_jsx(Overlay,{target:target.current,show:LoginError,placement:\"right\",children:function children(props){return/*#__PURE__*/_jsxs(Tooltip,_objectSpread(_objectSpread({id:\"overlay-example\"},props),{},{children:[\"\\uB85C\\uADF8\\uC778 \\uC624\\uB958!\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:\"\\uC774\\uBA54\\uC77C\"}),\" \\uB610\\uB294 \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\uBE44\\uBC00\\uBC88\\uD638\"}),\"\\uB97C\",\" \",/*#__PURE__*/_jsx(\"br\",{}),\"\\uD655\\uC778\\uD574\\uC8FC\\uC138\\uC694.\"]}));}}),/*#__PURE__*/_jsx(Button,{type:\"button\",style:{width:\"100%\",marginTop:\"0.3rem\"},onClick:function onClick(){props.history.push(\"/register\");},children:\"\\uD68C\\uC6D0\\uAC00\\uC785\"})]})})]})})})]});}export default Login;","map":{"version":3,"sources":["/Users/wk30815/Documents/Code/React/instagram/Final_HighteensTime/src/screens/Login.js"],"names":["React","useEffect","useRef","axios","SERVER_URL","Button","Form","Row","Col","Container","Alert","Tooltip","OverlayTrigger","Popover","Overlay","Toast","Link","messageAlram","tokenData","Test2","props","Login","useState","email","setEmail","password","setPassword","click","setClick","LoginError","setLoginError","target","onChangeEmail","e","value","onChangePassword","onClickLogin","data","post","then","res","localStorage","setItem","getItem","history","push","catch","err","console","log","handleKeyPress","key","height","marginTop","marginBottom","width","current"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nimport { SERVER_URL } from \"../utils/URL\";\r\nimport {\r\n  Button,\r\n  Form,\r\n  Row,\r\n  Col,\r\n  Container,\r\n  Alert,\r\n  Tooltip,\r\n  OverlayTrigger,\r\n  Popover,\r\n  Overlay,\r\n  Toast,\r\n} from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { messageAlram, tokenData } from \"../Apollo\";\r\n\r\nconst Test2 = (props) => {\r\n  return (\r\n    <Toast {...props}>\r\n      <Toast.Header>\r\n        <img src=\"holder.js/20x20?text=%20\" className=\"rounded mr-2\" alt=\"\" />\r\n        <strong className=\"mr-auto\">Bootstrap</strong>\r\n        <small>11 mins ago</small>\r\n      </Toast.Header>\r\n      <Toast.Body>Hello, world! This is a toast message.</Toast.Body>\r\n    </Toast>\r\n  );\r\n};\r\n\r\nfunction Login(props) {\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n  const [click, setClick] = React.useState(false);\r\n  const [LoginError, setLoginError] = React.useState(false);\r\n  const target = useRef(null);\r\n\r\n  const onChangeEmail = (e) => {\r\n    setEmail(e.target.value);\r\n  };\r\n\r\n  const onChangePassword = (e) => {\r\n    setPassword(e.target.value);\r\n  };\r\n\r\n  const onClickLogin = () => {\r\n    const data = {\r\n      email: email,\r\n      password: password,\r\n    };\r\n\r\n    axios\r\n      .post(SERVER_URL + \"/login\", data)\r\n      .then((res) => {\r\n        localStorage.setItem(\"TOKEN\", `Bearer ${res.data}`);\r\n        setLoginError(false);\r\n        tokenData(localStorage.getItem(\"TOKEN\"));\r\n        messageAlram(true);\r\n\r\n        props.history.push(\"/\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoginError(true);\r\n      });\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      onClickLogin();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container\r\n      className=\"justify-content-center align-self-center\"\r\n      style={{ height: \"600px\" }}\r\n    >\r\n      <Row\r\n        className=\"justify-content-md-center \"\r\n        style={{ marginTop: \"10rem\" }}\r\n      >\r\n        <Link to=\"/login\">\r\n          <h1 style={{ marginBottom: \"3rem\" }}>HighSchool Time</h1>\r\n        </Link>\r\n      </Row>\r\n      <Row className=\"justify-content-md-center\">\r\n        <Col md={5}>\r\n          <Form>\r\n            <Form.Group controlId=\"formHorizontalEmail\">\r\n              <Col>\r\n                <Form.Control\r\n                  type=\"email\"\r\n                  placeholder=\"Email\"\r\n                  onChange={onChangeEmail}\r\n                  onKeyPress={handleKeyPress}\r\n                />\r\n              </Col>\r\n            </Form.Group>\r\n            <Form.Group controlId=\"formHorizontalPassword\">\r\n              <Col>\r\n                <Form.Control\r\n                  type=\"password\"\r\n                  placeholder=\"Password\"\r\n                  onChange={onChangePassword}\r\n                  onKeyPress={handleKeyPress}\r\n                />\r\n              </Col>\r\n            </Form.Group>\r\n            <Form.Group>\r\n              <Col>\r\n                <Button\r\n                  type=\"button\"\r\n                  style={{ width: \"100%\" }}\r\n                  onClick={() => {\r\n                    onClickLogin();\r\n                  }}\r\n                  ref={target}\r\n                >\r\n                  로그인\r\n                </Button>\r\n                <Overlay\r\n                  target={target.current}\r\n                  show={LoginError}\r\n                  placement=\"right\"\r\n                >\r\n                  {(props) => (\r\n                    <Tooltip id=\"overlay-example\" {...props}>\r\n                      로그인 오류!<br></br>\r\n                      <strong>이메일</strong> 또는 <strong>비밀번호</strong>를{\" \"}\r\n                      <br />\r\n                      확인해주세요.\r\n                    </Tooltip>\r\n                  )}\r\n                </Overlay>\r\n\r\n                <Button\r\n                  type=\"button\"\r\n                  style={{ width: \"100%\", marginTop: \"0.3rem\" }}\r\n                  onClick={() => {\r\n                    props.history.push(\"/register\");\r\n                  }}\r\n                >\r\n                  회원가입\r\n                </Button>\r\n              </Col>\r\n            </Form.Group>\r\n          </Form>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}